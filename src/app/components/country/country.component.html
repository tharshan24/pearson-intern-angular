<h1 style="text-align: center">Countries</h1>

<div style="width: 90%; margin: 0 auto;">
  <div>
    <h2>Insert / Update Country</h2>
  </div>

<!--  insert / update form starts-->
<form [formGroup]="countryForm" (ngSubmit)="onFormSubmit()" class="example-form">

<!--  using table to align the input fields -->
  <table>
    <tr>
      <td>
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Country Code</mat-label>
          <input formControlName="countryCode" matInput placeholder="Country Code" value="" required>
        </mat-form-field>
      </td>

      <td>
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Country Name</mat-label>
          <input formControlName="countryName" matInput placeholder="Country Name" value="" required>
        </mat-form-field>
      </td>

      <td>
        <mat-form-field class="example-full-width" appearance="fill">
          <mat-label>Continent</mat-label>
          <mat-select formControlName="continent" matTooltip="Select Continent" autocomplete="off" required>
            <mat-option value="Asia"> Asia </mat-option>
            <mat-option value="Africa"> Africa </mat-option>
            <mat-option value="Australia"> Australia </mat-option>
            <mat-option value="North America"> North America </mat-option>
            <mat-option value="South America"> South America </mat-option>
            <mat-option value="Europe"> Europe </mat-option>
          </mat-select>
        </mat-form-field>
      </td>

    <td>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Population</mat-label>
        <input type="number" formControlName="population" matInput placeholder="Population" value="" required>
      </mat-form-field>
    </td>

    <td>
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Covid Cases</mat-label>
        <input type="number" formControlName="covidPositives" matInput placeholder="Covid Cases" value="" required>
      </mat-form-field>
    </td>
  </tr>

    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td>
        <button type="submit" mat-raised-button color="primary" >Save</button>
        <button style="margin-left: 10px" id="formReset" type="reset" mat-raised-button color="accent" >Reset</button>
      </td>
    </tr>
  </table>
</form>
<!--  insert / update form ends-->

  <div>
    <h2>Manage Countries</h2>
  </div>

<!--  data table starts-->
<table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

  <!-- Country Code Column -->
  <ng-container matColumnDef="Country Code">
    <th mat-header-cell *matHeaderCellDef> Country Code </th>
    <td mat-cell *matCellDef="let country"> {{country.countryCode}} </td>
  </ng-container>

  <!-- Country Name Column -->
  <ng-container matColumnDef="Country Name">
    <th mat-header-cell *matHeaderCellDef> Country Name </th>
    <td mat-cell *matCellDef="let country"> {{country.countryName}} </td>
  </ng-container>

  <!-- Continent Column -->
  <ng-container matColumnDef="Continent">
    <th mat-header-cell *matHeaderCellDef> Continent </th>
    <td mat-cell *matCellDef="let country"> {{country.continent}} </td>
  </ng-container>

  <!-- population Column -->
  <ng-container matColumnDef="Population">
    <th mat-header-cell *matHeaderCellDef> Population </th>
    <td mat-cell *matCellDef="let country"> {{country.population}} </td>
  </ng-container>

  <!-- covid Column -->
  <ng-container matColumnDef="Covid Cases">
    <th mat-header-cell *matHeaderCellDef> Covid Cases </th>
    <td mat-cell *matCellDef="let country"> {{country.covidPositives}} </td>
  </ng-container>

  <ng-container matColumnDef="Actions">
    <th mat-header-cell *matHeaderCellDef> Actions </th>
    <td mat-cell *matCellDef="let country">
<!--      country object is passed and calling edit function in ts-->
      <button mat-icon-button (click)="edit(country)">
      <mat-icon mat-icon-button color='primary' matTooltip="Edit Country">edit</mat-icon>
      </button>
<!--      country id is passed and calling delete funtion -->
      <button mat-icon-button (click)="delete(country.id)">
        <mat-icon mat-icon-button color="warn" matTooltip="Delete Country">delete</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
</table>

<!--  data table ends-->
</div>



